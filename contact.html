<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assests/styles/main.css">
    <title>Contact</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        main {
            padding: 3dvh;
        }

        main h1 {
            text-align: center;
            color: var(--text-color);
        }

        section {
            background-color: white;
            border: 0.25em solid var(--border-color);
            border-radius: 1dvw;
            padding: 3dvh;
            margin-bottom: 3dvh;
        }


        section h3 {
            font-family: var(--header-font-stack), serif;
            color: var(--secondary-color);
            font-size: 1.75rem;
            margin-bottom: 1.5dvh;
        }
        section p {
            font-size: 1.25rem;
            color: var(--text-color);
            margin-bottom: 1dvh;
        }

        section a {
            color: var(--link-color);
            text-decoration: none;
        }

        section a:hover {
            text-decoration: underline;
            color:var(--secondary-color);
        }
        main{
            form fieldset {
            border: 1px solid var(--border-color);
            border-radius: 1dvw;
            padding: 2dvh;
        }

        form legend h3 {
            font-size: 1.75rem;
            color: var(--secondary-color);
        }

        form label {
            font-size: 1.25rem;
            color: var(--text-color);
            margin-bottom: 0.5dvh;
            display: block;
        }

        form input,
        form select,
        form textarea {
            width: 100%;
            padding: 1dvh;
            margin-bottom: 1.5dvh;
            border: 0.1em solid var(--border-color);
            border-radius: 0.5dvw;
            font-size: 1rem;
            font-family: var(--body-font-stack), monoscript;
        }

        form textarea {
            resize: vertical;
        }

        form input[type="submit"] {
            background-color: var(--primary-color);
            color: var(--text-color);
            padding: 1dvh 2dvw;
            border: none;
            border-radius: 0.5dvw;
            cursor: pointer;
        }

        form input[type="submit"]:hover {
            background-color: var(--secondary-color);
            color: white;

        }
        form #hiddenfields {
            border: 0;
        }
        
        }
        
        

    </style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('form');
        const fullName = document.getElementById('full_name');
        const emailField = document.getElementById('email_field');
        const review = document.getElementById('review');
        const errorMessage = document.getElementById('error-message');
        var formErrors = document.getElementById('form-errors');
        const MAX_CHARS = 300;
        
        var errorList = [];
   


        function showError(message, field) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            field.classList.add('error-highlight');
            setTimeout(() => {
                errorMessage.style.display = 'none';
                field.classList.remove('error-highlight');
            }, 3000);
            //errorList.push(field);
            //errorList.push(field.name || field.id || 'unknown');

            const fieldIdentifier = field.name || field.id || 'unknown';

            // Only add if it doesn't already exist in errorList
            if (!errorList.includes(fieldIdentifier)) {
                errorList.push(fieldIdentifier);
            }

            formErrors.value = errorList;
        }
        const style = document.createElement('style');
        style.innerHTML = `
            .error-highlight {
                border: 2px solid red !important;
                background-color: #ffe6e6;
            }
            #char-count {
                display: block;
                font-weight: bold;
                margin-top: -1dvh;
                margin-bottom: 1dvh;
            }
        `;
        document.head.appendChild(style);
    
        // Live character countdown
        const charCount = document.createElement('small');
        charCount.id = 'char-count';
        review.parentNode.appendChild(charCount);
    
        function updateCharCount() {
            const remaining = MAX_CHARS - review.value.length;
            charCount.textContent = `You have ${remaining} character${remaining !== 1 ? 's' : ''} remaining`;
    
            if (remaining <= 10) {
                charCount.style.color = 'red';
                review.classList.add('error-highlight');
            } else if (remaining <= 30 && remaining > 10) {
                charCount.style.color = 'orange';
                review.classList.remove('error-highlight');
            } else {
                charCount.style.color = 'var(--text-color)';
                review.classList.remove('error-highlight');
            }
        }
    
        review.addEventListener('input', updateCharCount);
        updateCharCount();
    
        // Live mask warning (but not validation logic here)
        fullName.addEventListener('input', (e) => {
            const pattern = /^[a-zA-Z\s]*$/;
            if (!pattern.test(e.target.value)) {
                showError('Only letters and spaces are allowed in Full Name.', fullName);
            }
        });
    
        emailField.addEventListener('input', (e) => {
            const pattern = /^[a-zA-Z0-9@._-]*$/;
            if (!pattern.test(e.target.value)) {
                showError('Only email-safe characters allowed.', emailField);
            }
        });

    
        form.addEventListener('submit', (e) => {

            let isValid = true;
    
            // --- Validate Full Name ---
            const nameValue = fullName.value.trim();
            const namePattern = /^[a-zA-Z\s]*$/;
            if (!nameValue) {
                showError('Please enter your full name.', fullName);
                fullName.setCustomValidity('Required');
                isValid = false;
            } else if (!namePattern.test(nameValue)) {
                showError('Name contains invalid characters.', fullName);
                fullName.setCustomValidity('Invalid characters');
                isValid = false;
            } else {
                fullName.setCustomValidity('');
            }
    
            // --- Validate Email ---
            const emailValue = emailField.value.trim();
            const emailCharPattern = /^[a-zA-Z0-9@._-]*$/;
            const emailFormatPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    
            if (!emailValue) {
                showError('Please enter your email.', emailField);
                emailField.setCustomValidity('Required');
                isValid = false;
            } else if (!emailCharPattern.test(emailValue)) {
                showError('Email contains invalid characters.', emailField);
                emailField.setCustomValidity('Invalid characters');
                isValid = false;
            } else if (!emailFormatPattern.test(emailValue)) {
                showError('Invalid email address.', emailField);
                emailField.setCustomValidity('Invalid format');
                isValid = false;
            } else {
                emailField.setCustomValidity('');
            }
    
            // --- Validate Review Length ---
            if (review.value.length > MAX_CHARS) {
                const overBy = review.value.length - MAX_CHARS;
                showError(`Message exceeds ${MAX_CHARS} characters.`, review);
                isValid = false;
            }
        });
       
    });

    </script>
    
    
    
    
</head>
<body>
    <header>
        <nav>
            <a href="./index.html">Homepage</a>
            <a href="./about.html">AboutMe</a>
            <a href="./resume.html">Resume</a>
            <a href="./project.html">Project</a>
            <a href="./contact.html">Contact</a>
            <a href="./garden.html">Garden</a>
        </nav>
        <aside>
            <search>
                <form>
                    <input name="search" id="search" placeholder="Search My Website"> <button type = "button">Search</button>
                </form>
            </search>
        </aside>
          
    </header>
    <main>
        <h1>Contact Me!</h1>
        <section id = "socials">
            <h3>My Socials</h3>
            <p>Email: allybc1124@gmail.com</p>
            <p>Linkedin: </p>
            <a href="https://www.linkedin.com/in/allison-b-chan/">https://www.linkedin.com/in/allison-b-chan</a>
        </section>
        <section id="forms">
            <form action="http://httpbin.org/get" method="get">
                
                <fieldset>
                    <legend><h3>Let Me Get to Know You!</h3></legend>
                    
                    <label for="full_name">Full Name: </label>
                    <input type="text" name="full_name" id="full_name" placeholder="Name"> 
                    <br>
                    <div id="error-message" style="color: red; font-weight: bold; display: none;"></div>

                    <label for="email_field">Email:</label>
                    <input type="text" name="email" id="email_field" placeholder="username@email.com">
                </fieldset>
                <br>
                <fieldset>
                    <legend><h4>Favorite School Subject</h4></legend>
                    
                    <select name="subject" id="subject">
                        <option value="" hidden>Subjects</option>
                        <optgroup label="STEM">
                            <option value="Math">Math</option>
                            <option value="Science">Science</option>
                            <option value="Computer Science">Computer Science</option>
                        </optgroup>
                        <optgroup label="Humanities">
                            <option value="English">English</option>
                            <option value="History">History</option>
                            <option value="Art">Art</option>
                        </optgroup>
                    </select>
                </fieldset>
                <br>
                <fieldset>
                    <legend><h4>Favorite Ice Cream Flavor?</h4></legend>
                    
                    <input list="flavors" name="flavor" id="flavor">
                    <datalist id="flavors">
                        <option value="Vanilla"></option>
                        <option value="Chocolate"></option>
                        <option value="Cookies and Cream"></option>
                        <option value="Strawberry"></option>
                        <option value="Coconut"></option>
                        <option value="Unicorn Sparkle"></option>
                    </datalist>
                </fieldset>  
                <br>
                <fieldset>
                    <legend><h4>Comments, Concerns, Complaints, Jokes:</h4></legend>
                    
                    <textarea id="review" name="review" rows="4" cols="50" maxlength="300" placeholder="insert here"></textarea>
                </fieldset>
                <br><br>
                <fieldset id = "hiddenfields">
                    <input type="hidden" name="possible_bot" id="possible_bot" value="true">
                    <input type="hidden" name="form-errors" id = "form-errors" value="">
                </fieldset>
                
                <input type="submit" value="Submit">
            </form>
        </section>
    </main>
    <footer>
        <br>
        <address>
            Created by <a href="mailto:allybc1124@gmail.com">Allison Chan</a><br> 
            Last Updated: July 2025<br>
            Current Status: Doing my best :/<br>
            Published through Netlify
        </address>
    </footer>
    
</body>
</html>